<!-- author: Maria Berenice Garcia Gutierrez -->

<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Agregar Usuario</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="addUserForm" (ngSubmit)="addUser()">
    
    <ion-item>
      <ion-label position="floating">Correo Electrónico</ion-label>
      <ion-input formControlName="email" type="email" (ionBlur)="validateEmail()"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="addUserForm.get('email')?.invalid && (addUserForm.get('email')?.dirty || addUserForm.get('email')?.touched)">
      Correo inválido.
    </ion-text>

    <ion-item>
      <ion-label position="floating">Nombre Completo</ion-label>
      <ion-input formControlName="fullName" (ionInput)="toUpperCase($event)"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Usuario</ion-label>
      <ion-input formControlName="username" (ionInput)="removeSpaces($event)"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Contraseña</ion-label>
      <ion-input type="password" formControlName="password" (ionInput)="validatePasswordMatch()"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Confirmar Contraseña</ion-label>
      <ion-input type="password" formControlName="confirmPassword" (ionInput)="validatePasswordMatch()"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="passwordMismatch && addUserForm.get('confirmPassword')?.touched">
      Las contraseñas no coinciden.
    </ion-text>

    <ion-item>
      <ion-label position="floating">Selecciona un rol</ion-label>
      <ion-select formControlName="role" placeholder="Rol">
        <ion-select-option value="user">Usuario</ion-select-option>
        <ion-select-option value="admin">Administrador</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-button expand="full" type="submit" [disabled]="!addUserForm.valid">Agregar Usuario</ion-button>
  </form>
</ion-content>
<ion-tabs>
  <ion-tab-bar slot="bottom">
    <ion-tab-button tab="home" routerLink="/home">
      <ion-icon name="home-outline"></ion-icon>
      <ion-label>Home</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="list" routerLink="/admin-users/list">
      <ion-icon name="people-outline"></ion-icon>
      <ion-label>Usuarios</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="add" routerLink="/admin-users/add">
      <ion-icon name="person-add-outline"></ion-icon>
      <ion-label>Agregar</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="edit" routerLink="/admin-users/edit">
      <ion-icon name="create-outline"></ion-icon>
      <ion-label>Modificar</ion-label>
    </ion-tab-button>
  </ion-tab-bar>
</ion-tabs>
